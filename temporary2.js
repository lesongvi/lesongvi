(function(b){function p(a){return a=1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+" MB":1E3<=a?(a/1E3).toFixed(2)+" KB":1<a?a+" bytes":1==a?a+" byte":"0 byte"}function q(a){30<a.length&&(a=a.slice(0,15)+"..."+a.slice(a.length-10));return a}function c(){if(e.find("li").length){if(!e.find("li.loading").length&&b(".img_bbcode").length){var a=[];e.find("li").each(function(){var f=b(this);f.hasClass("success")?a.push(f.find(".img_bbcode").val()):a.push("L\u1ed7i \u1ea3nh "+f.find("img").data("name"))});
r.val(a.join("\n\n"));t.val(b(".img_bbcode:first").data("thumb"));g.slideDown(function(){u.animate({scrollTop:g.offset().top})})}}else m.click()}var e=b("#img_list"),k=b("#img_upload"),m=b("#img_reset"),n=b("#img_choose_wrap"),g=b("#img_data"),u=b("html,body"),r=b("#img_mess"),t=b("#img_desc"),l=location.search;""!==l&&0===l.indexOf("?postto=")&&b("#img_type").val(l.slice(8));n.on("change","#img_choose",function(){k.prop("disabled",!0);b.each(this.files,function(a,f){if(/^image\/(jpeg|png|bmp|gif)$/.test(this.type)){var d=
f.name;if(!b('img[data-name="'+d+'"]').length){var c=new FileReader,h=new Image;c.readAsDataURL(f);c.onload=function(a){h.src=a.target.result;var c=b("<img>",{src:a.target.result});c.watermark({path:"data:image/png;base64,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",
done:function(a){var b=this.width,h=this.height;c.attr({src:a,"class":"watermark","data-width":b,"data-height":h,"data-name":d});e.append(c);c.wrap('<li class="ui-state-default"></li>');c.after('<div class="img_close">close</div><div class="img_details"><p><strong>Name</strong>: '+q(d)+"</p><p><strong>Size</strong>: ("+b+"x"+h+") "+p(f.size)+'</p></div><div class="img_progress_bar"><div class="img_progress"></div></div>')}})}}}});n.html('<input id="img_choose" type="file" multiple accept="image/*" /><span>Ch\u1ecdn \u1ea3nh</span>');
e.sortable({placeholder:"ui-state-highlight",update:function(a,b){c()}}).disableSelection();k.prop("disabled",!1)});k.click(function(){e.find("li:not(.success)").each(function(a,e){var d=b(this),g=d.find("img").attr("src").replace(/data:image\/.+;base64\,/,"");d.removeClass("error").addClass("loading");b.ajax({url:"https://api.imgur.com/3/image",xhr:function(){var a=new window.XMLHttpRequest;a.upload.addEventListener("progress",function(a){a.lengthComputable&&d.find(".img_progress").css({width:a.loaded/
a.total*100+"%"})},!1);return a},method:"POST",headers:{Authorization:"Client-ID 376e1e3bc7aaf7c"},data:{image:g,type:"base64"},success:function(a){var b=a.data.link;d.removeClass("loading").addClass("success");d.find(".img_details").html('<p><input class="img_bbcode" data-thumb="'+b.replace(/(.+)(\.)(png|jpg|gif|bmp)$/,"$1m.$3")+'" onclick="this.select();" type="text" value="[img]'+b+'[/img]" /></p><p><a href="'+b+'" target="_blank">Xem \u1ea3nh</a><a href="http://imgur.com/delete/'+a.data.deletehash+
'" target="_blank">X\u00f3a \u1ea3nh</a></p>');c()},error:function(a){d.removeClass("loading").addClass("error");c();console.warn(a)}})})});m.click(function(){e.empty();g.slideUp()});e.on("click",".img_close",function(){b(this).parent().remove();c()})})(jQuery);
